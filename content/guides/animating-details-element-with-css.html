---
title: Animating details HTML element with pure CSS (without calc-size(auto))
description: "I needed some ingenious solution to pretty-up my details element styling. This guide is a temporary
workaround until the calc-size() CSS function becomes widely available."
date: 2025-11-29
updated: 2026-01-11
tutorialCSS: "assets/css/tutorials.css"
---

<div class="note-box">
  <p><strong>Table of contents:</strong></p>
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#lets-begin">Let's begin...</a></li>
    <li><a href="#changing-the-default-styles">Changing the default styles</a></li>
    <li><a href="#changing-the-default-marker">Changing the default marker</a></li>
    <li>
      <a href="#animating-opening-and-closing">Animating opening and closing of the <code>&#x3C;details&#x3E;</code></a>
    </li>
    <li>
      <a href="#adding-media-query">Bonus: Adding media query to respect user's reduced motion preferences</a>
    </li>
  </ul>
</div>

<h2 id="introduction">Introduction</h2>
<p>
  <i>
    This guide is a temporary workaround until the <code>calc-size()</code> <a
      href="https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Values/calc-size" target="_blank"
      rel="noopener noreferrer">(MDN Web Docs)</a> CSS function becomes widely available.
  </i>
</p>
<hr>
<p>
  I recently decided to pretty-up my website a bit, and one of the things I
  wanted to improve the most was the <code>&#x3C;details&#x3E;</code>
  element.
</p>
<p>
  Before we start, I need to make some things clear — <strong>this is not an ideal
    solution</strong>, but it's the best one that I managed to figure out, based on
  features that are currently available and widely supported across all major
  browsers (spoiler: we will be using <code>max-block-size</code> CSS property). Also, I will assume that you at least
  know some basics of HTML and
  CSS by now.
</p>
<p>
  Historically, accordion menus have often
  been an accessibility nightmare and people didn't really have a set way of
  making them. HTML5, however, introduced a native <code>&#x3C;details&#x3E;</code>
  element. While it also used to have some accessibility problems, most of
  them seem to be resolved by now. At the very least, it's standardized.
</p>

<h2 id="lets-begin">Let's begin...</h2>
<p>
  Here is what a default
  <code>&#x3C;details&#x3E;</code>
  element looks like, without any CSS applied:
</p>
<details class="details">
  <summary>This is the summary; click me!</summary>
  <p>This is the contents section. Looks pretty plain, doesn't it?</p>
  <p>
    <i aria-hidden="true">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum eget
      elit nibh. Aliquam quis justo molestie, pellentesque ante eu, accumsan
      lectus. Morbi condimentum ligula luctus enim suscipit, id bibendum velit
      molestie. Duis vel enim metus. Donec efficitur rutrum enim bibendum commodo.
    </i>
  </p>
</details>

<h2 id="changing-the-default-styles">Changing the default styles</h2>
<p>
  Let's start with adding some basic styling and changing a few things. We will
  add a border and gradual color change on hover over the
  <code>&#x3C;summary&#x3E;</code> element. By the way... Did you notice how, despite the
  <code>&#x3C;summary&#x3E;</code> element behaving more like a button, on mouse hover,
  instead of the pointer cursor, it has a text select cursor? Well, I personally think it makes no
  sense, so I will change that by adding cursor: pointer in my CSS sheet. This is how it looks now:
</p>
<details class="details-one">
  <summary>Changing the default styles a bit (show code)</summary>
  <pre><code>details {
  margin: 1rem auto;
  border: 0.1rem solid black;
  border-radius: 0.2rem;
}

details > *:not(summary) {
  margin: 1rem;
}

 summary {
  padding: 0.5rem;
  transition: background-color 0.3s;
}

summary:hover {
  cursor: pointer;
  background-color: lightgrey;
}
</code></pre>
</details>
<p>
  <strong>Tip:</strong> If you want to include headings in your
  <code>&#x3C;summary&#x3E;</code> element (you are allowed to, which isn't the
  case with the buttons), you can change their display property to
  "inline" (since they are block elements by default) with CSS, or else they will look weird. <em>I won't
  </em> be doing that in this case, because I will be changing it to flexbox further down the line.
</p>
<h2 id="changing-the-default-marker">Changing the default marker</h2>
<p>
  Let's pretty-up the default marker next. First, I will move it to the end of
  the <code>&#x3C;summary&#x3E;</code> container by converting it to flexbox. Then, I will add the CSS marker rotation
  animation.
</p>
<details class="details-two">
  <summary>Сhanging the look of the default marker (show code)</summary>
  <pre><code>/* Base code */
    
details {
  margin: 1rem auto;
  border: 0.1rem solid black;
  border-radius: 0.2rem;
}

details > *:not(summary) {
  margin: 1rem;
}

summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem;
  list-style: none;
  transition: 0.3s;
}

summary:hover {
  cursor: pointer;
  background-color: lightgrey;
}
    
/* Rotating triangle marker for &#x3C;details&#x3E; */

summary::after {
  content: "";
  transition: 0.3s;
  border-block-start: 0.4rem solid black;
  border-inline: 0.25rem solid transparent;
}

details[open] > summary::after {
  transform: rotate(-180deg);
}

summary::-webkit-details-marker {
  display: none;
}</code></pre>
</details>
<p>
  Credits to <a href="https://codepen.io/SitePoint/pen/gOqYGWy" target="_blank" rel="noopener noreferrer">SitePoint</a>
  (codepen.io) for the main idea.
</p>

<h2>Adding a fade-in and fade-out effect on opening and closing the element</h2>
<p>You can target the content inside the <code>&#x3C;details&#x3E;</code> element with the CSS pseudo-element
  <code>::details-content</code>. I'm going to add a simple opacity fade effect. Just something to spice-up the
  content
  further!
</p>
<details class="details-three">
  <summary>Fade-in effect (show code)</summary>
  <pre><code>/* Base code */
    
details {
  margin: 1rem auto;
  border: 0.1rem solid black;
  border-radius: 0.2rem;
}

details > *:not(summary) {
  margin: 1rem;
}

 summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem;
  list-style: none;
  transition: 0.3s;
}

summary:hover {
  cursor: pointer;
  background-color: lightgrey;
}
    
/* Rotating triangle marker for &#x3C;details&#x3E; */

summary::after {
content: "";
  transition: 0.3s;
  border-block-start: 0.4rem solid black;
  border-inline: 0.25rem solid transparent;
}

details[open] > summary::after {
  transform: rotate(-180deg);
}

summary::-webkit-details-marker {
  display: none;
  
}

/* Fade-in effect */

details::details-content {
  opacity: 0;
  transition: opacity 0.4s;
}

details[open]::details-content {
  opacity: 1;
}</code></pre>
</details>

<h2 id="animating-opening-and-closing">... And <em>now</em> the thing you all came here for — animating the opening
  and closing of the
  &#x3C;details&#x3E;
  element
</h2>
<p>
  Okay so, here is the thing. Ideally, we would use the CSS declaration <code>block-size: calc-size(auto);</code> (or
  <code>height</code> instead of <code>block-size</code>, look up <a
    href="https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Logical_properties_and_values" target="_blank"
    rel="noopener noreferrer">logical properties and values</a>) and be done with it. But as of writing this guide
  (11/27/2025), the <code>calc-size();</code> CSS function remains an experimental feature, one that is not supported
  in
  all major browsers.
</p>
<p>
  So... Now what? Well, I decided to look up JavaScript solutions, even though I firmly believe that JS should
  <em>only</em> be used for interactivity and <em>not</em> for styling. And yet, everything I could find seemed overly
  complicated. I myself am not yet that good with JavaScript to code a solution from scratch, so... I abandoned the
  idea.
</p>
<p>
  Thankfully, I found a different approach, that only uses CSS and is widely supported. We are going to use the CSS
  property <code>max-block-size</code> (or, <code>max-height</code>), but the catch is... We will have to hardcode it.
  I
  am also going to create multiple CSS animation "presets" with different timings for <code>&#x3C;details&#x3E;</code>
  elements with different heights. Also, I will be assigning each HTML <code>&#x3C;details&#x3E;</code> element a
  corresponding <code>class</code> attribute. You will see why soon.
</p>
<p>On my site, I have <em>4</em> different CSS animation presets, each tailored for different height of the
  <code>&#x3C;details&#x3E;</code> element. The thing is, if your hardcoded <code>max-block-size</code> height is too
  small, then a part of your content placed inside the <code>&#x3C;details&#x3E;</code> will get cut off. And if your
  hardcoded height is too big, the
  closing/collapsing animation will have a very noticeable delay, since the browser is calculating the size as if it
  was
  your maximum specified size. This is also why I utilized the <code>linear</code>
  <code>transition-timing-function</code> value,
  because it's the same speed all the way through.
</p>
<p>
  <strong>Important:</strong> You will have to finetune the timings and sizes to suit your own usecase. <em>Make
    sure</em> that you test how your <code>&#x3C;details&#x3E;</code> element looks with a high zoom level, such as
  150% or 170% and/or with a different viewport width (that just means that you should narrow your desktop browser
  window size, FYI).
</p>
<p>Aaaanyway... Here is the code for you:</p>
<details class="animation-extra-long">
  <summary>Fade-in and gradual opening and closing animation (show code)</summary>
  <pre><code>/* Base code */
    
details {
  margin: 1rem auto;
  border: 0.1rem solid black;
  border-radius: 0.2rem;
}

details > *:not(summary) {
  margin: 1rem;
}

 summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem;
  list-style: none;
  transition: 0.3s;
}

summary:hover {
  cursor: pointer;
  background-color: lightgrey;
}
    
/* Rotating triangle marker for &#x3C;details&#x3E; */

summary::after {
content: "";
  transition: 0.3s;
  border-block-start: 0.4rem solid black;
  border-inline: 0.25rem solid transparent;
}

details[open] > summary::after {
  transform: rotate(-180deg);
}

summary::-webkit-details-marker {
  display: none;
  
}

/* Animation */

details::details-content {
  max-block-size: 0;
  opacity: 0;
  transition: opacity 0.4s, max-block-size 0.3s linear,
    content-visibility 0.3s linear; /* adjust the timings as needed */
  transition-behavior: allow-discrete;
  overflow: hidden;
}

details[open]::details-content {
  opacity: 1;
  max-block-size: 100rem; /* adjust the size as needed */
}</code></pre>
</details>
<p>And here are my animation presets and my timings that I picked for myself, both for opacity and movement:</p>
<details class="animation-extra-long">
  <summary>My CSS animation presets</summary>
  <pre><code>/* details CSS-only animation, with presets for different sizes */

details::details-content {
  max-block-size: 0;
  opacity: 0;
  transition: opacity 0.4s, max-block-size 0.15s linear,
    content-visibility 0.15s linear;
  transition-behavior: allow-discrete;
  overflow: hidden;
}

details[open]::details-content {
  opacity: 1;
  max-block-size: 15rem; /* max-block-size has to be hard-coded for the animation to work (unfortunately) */
}

.animation-medium::details-content {
  transition: opacity 0.4s, max-block-size 0.2s linear,
    content-visibility 0.2s linear;
  transition-behavior: allow-discrete;
}

.animation-medium[open]::details-content {
  max-block-size: 30rem;
}

.animation-long::details-content {
  transition: opacity 0.4s, max-block-size 0.25s linear,
    content-visibility 0.25s linear;
  transition-behavior: allow-discrete;
}

.animation-long[open]::details-content {
  max-block-size: 60rem;
}

.animation-extra-long::details-content {
  transition: opacity 0.4s, max-block-size 0.3s linear,
    content-visibility 0.3s linear;
  transition-behavior: allow-discrete;
}

.animation-extra-long[open]::details-content {
  max-block-size: 100rem;
}</code></pre>
</details>
<p>And here is how my final presets look:</p>
<details>
  <summary>Default size (small)</summary>
  <p>
    Lorem ipsum <span aria-hidden="true">dolor sit amet, consectetur adipiscing elit. Praesent vitae nisl ut metus
      aliquam tempor. Sed lacinia
      finibus urna vestibulum mattis. Nullam facilisis eros leo, feugiat posuere erat venenatis sed. Proin vitae
      finibus
      nisl. Donec eget suscipit turpis. Donec sed lectus lacinia, ultricies ipsum ac, finibus turpis. Ut rhoncus felis
      enim, at finibus magna pulvinar at.</span>
  </p>
</details>
<details class="animation-medium">
  <summary>Medium size</summary>
  <p>
    Lorem ipsum <span aria-hidden="true">dolor sit amet, consectetur adipiscing elit. Praesent vitae nisl ut metus
      aliquam tempor. Sed lacinia
      finibus urna vestibulum mattis. Nullam facilisis eros leo, feugiat posuere erat venenatis sed. Proin vitae
      finibus
      nisl. Donec eget suscipit turpis. Donec sed lectus lacinia, ultricies ipsum ac, finibus turpis. Ut rhoncus felis
      enim, at finibus magna pulvinar at.</span>
  </p>
  <p aria-hidden="true">
    Aliquam sollicitudin felis ut dapibus gravida. Ut sollicitudin libero velit, ut sollicitudin erat luctus a. Sed
    nunc
    mauris, viverra eget pellentesque a, faucibus sit amet dolor. In imperdiet blandit dolor, in elementum velit
    tincidunt at. Maecenas dictum auctor commodo. Etiam ac bibendum eros. Cras pharetra mi diam, eget accumsan massa
    commodo et. Ut tortor mauris, viverra nec porta vitae, posuere quis magna. Cras interdum lacus a mollis dignissim.
    Quisque interdum augue id tellus vulputate vulputate.
  </p>
</details>
<details class="animation-long">
  <summary>Large size</summary>
  <p>
    Lorem ipsum <span aria-hidden="true">dolor sit amet, consectetur adipiscing elit. Praesent vitae nisl ut metus
      aliquam tempor. Sed lacinia
      finibus urna vestibulum mattis. Nullam facilisis eros leo, feugiat posuere erat venenatis sed. Proin vitae
      finibus
      nisl. Donec eget suscipit turpis. Donec sed lectus lacinia, ultricies ipsum ac, finibus turpis. Ut rhoncus felis
      enim, at finibus magna pulvinar at. Donec rhoncus nulla ac enim varius, vitae semper mi fermentum. Aliquam id
      pellentesque enim.</span>
  </p>
  <p aria-hidden="true">
    Aliquam sollicitudin felis ut dapibus gravida. Ut sollicitudin libero velit, ut sollicitudin erat luctus a. Sed
    nunc
    mauris, viverra eget pellentesque a, faucibus sit amet dolor. In imperdiet blandit dolor, in elementum velit
    tincidunt at. Maecenas dictum auctor commodo. Etiam ac bibendum eros. Cras pharetra mi diam, eget accumsan massa
    commodo et. Ut tortor mauris, viverra nec porta vitae, posuere quis magna. Cras interdum lacus a mollis dignissim.
    Quisque interdum augue id tellus vulputate vulputate. Maecenas ipsum arcu, rutrum in ultrices ac, aliquam ut
    ipsum.
    Pellentesque ultrices et ante ut venenatis. Vivamus in odio non nibh consequat lobortis in a mi. Etiam ornare
    justo
    sed sapien consequat congue.
  </p>
  <p aria-hidden="true">
    Vivamus scelerisque tellus neque, quis commodo sapien consequat nec. Nam pretium eu velit eu porta. Duis luctus
    risus vitae dignissim lacinia. In tincidunt dictum diam, eget sagittis elit dapibus vitae. Ut enim ipsum, placerat
    et egestas non, luctus ac mi. Sed bibendum odio a fermentum ultrices. Aliquam ut eleifend elit. Sed dapibus
    aliquet
    sapien ac auctor. Pellentesque vitae felis dolor. Mauris ac dui semper diam molestie cursus eu in nisl. Aliquam
    consectetur, eros eget consequat posuere, felis justo bibendum sem, at scelerisque justo neque id est.
  </p>
</details>
<details class="animation-extra-long">
  <summary>Extra large size</summary>
  <p>
    Lorem ipsum <span aria-hidden="true">dolor sit amet, consectetur adipiscing elit. Praesent vitae nisl ut metus
      aliquam tempor. Sed lacinia
      finibus urna vestibulum mattis. Nullam facilisis eros leo, feugiat posuere erat venenatis sed. Proin vitae
      finibus
      nisl. Donec eget suscipit turpis. Donec sed lectus lacinia, ultricies ipsum ac, finibus turpis. Ut rhoncus felis
      enim, at finibus magna pulvinar at. Donec rhoncus nulla ac enim varius, vitae semper mi fermentum. Aliquam id
      pellentesque enim.</span>
  </p>
  <p aria-hidden="true">
    Aliquam sollicitudin felis ut dapibus gravida. Ut sollicitudin libero velit, ut sollicitudin erat luctus a. Sed
    nunc
    mauris, viverra eget pellentesque a, faucibus sit amet dolor. In imperdiet blandit dolor, in elementum velit
    tincidunt at. Maecenas dictum auctor commodo. Etiam ac bibendum eros. Cras pharetra mi diam, eget accumsan massa
    commodo et. Ut tortor mauris, viverra nec porta vitae, posuere quis magna. Cras interdum lacus a mollis dignissim.
    Quisque interdum augue id tellus vulputate vulputate. Maecenas ipsum arcu, rutrum in ultrices ac, aliquam ut
    ipsum.
    Pellentesque ultrices et ante ut venenatis. Vivamus in odio non nibh consequat lobortis in a mi. Etiam ornare
    justo
    sed sapien consequat congue.
  </p>
  <p aria-hidden="true">
    Vivamus scelerisque tellus neque, quis commodo sapien consequat nec. Nam pretium eu velit eu porta. Duis luctus
    risus vitae dignissim lacinia. In tincidunt dictum diam, eget sagittis elit dapibus vitae. Ut enim ipsum, placerat
    et egestas non, luctus ac mi. Sed bibendum odio a fermentum ultrices. Aliquam ut eleifend elit. Sed dapibus
    aliquet
    sapien ac auctor. Pellentesque vitae felis dolor. Mauris ac dui semper diam molestie cursus eu in nisl. Aliquam
    consectetur, eros eget consequat posuere, felis justo bibendum sem, at scelerisque justo neque id est. Sed dictum
    ultrices ex et hendrerit. Nulla rutrum lobortis ex vel tincidunt. Duis in faucibus nulla, vitae placerat dolor.
    Maecenas efficitur fermentum mi sit amet dignissim. Donec erat metus, sodales eu convallis sed, lobortis non
    turpis.
  </p>
  <p aria-hidden="true">
    Integer molestie efficitur nibh, nec consectetur quam tempus id. Vestibulum luctus nisi suscipit feugiat sodales.
    Aenean venenatis tincidunt ullamcorper. Curabitur luctus lectus vestibulum, finibus massa nec, pellentesque justo.
    Cras ac ultrices sapien. Morbi at est libero. Aliquam quam quam, pellentesque id interdum nec, mollis in sapien.
    Maecenas dolor purus, auctor a mattis eu, cursus quis odio.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse id gravida sapien. Aenean id porttitor orci.
    In
    et euismod felis. Donec maximus congue orci, dignissim cursus tellus efficitur ac. Nunc aliquet est metus, nec
    facilisis nulla cursus sit amet. Vivamus convallis neque sed diam rhoncus.
  </p>
</details>
<h2 id="adding-media-query">Bonus: Adding media query to respect user's reduced motion preferences</h2>
<p>
  This is optional, but I'm adding it to improve accessibility of my animations. The <code>&#x3C;details&#x3E;</code>
  element will look and work as intended, but won't have the smooth opening and closing animation.
</p>
<details>
  <summary>Media query CSS code</summary>
  <pre><code>@media screen and (prefers-reduced-motion: no-preference) {
    /* Just paste the entire animation CSS code here, with all your presets */
    ::details-content {
    /* Your code here */
    }
    ::details-content[open] {
    /* Your code here */
    }
    /* ... */
  }
  </code></pre>
</details>
<hr>
<p><i>That's it! Hopefully someone else migth find this guide useful.</i></p>